### DOT ATTENDANCE (색상 블록=나중에 업데이트)

# 전체 공통 규칙 (역할 공통)

- **상태 색상**: 출근(초록) / 휴게(노랑) / 외근(파랑) / 퇴근(회색) / 지각·결근(빨강) 배지.
- **필드 유효성**: 전화번호(`010-0000-0000`), 생년월일(YYYY-MM-DD), 사업자번호(10자리), 파일(PNG/JPG/PDF ≤ 10MB).
- **수정/삭제 시 사유 필수**: 근태/스케줄/승인·반려 모두 모달에서 사유 입력(최소 5자).
- **엑셀 내보내기**: 현재 필터 그대로 반영, XLSX/CSV 선택, 완료 후 링크/알림.
- **시간대**: 서버 UTC 저장, 화면 KST 표기.
- **접근 제어**: 권한 없으면 버튼 비활성 + “접근권한이 없습니다” 토스트.

---

# 1) SUPER ADMIN (시스템 관리자) — “관리자”

## 1-1. 로그인

- 입력: **코드(ID)**, **PW**
- 버튼: `로그인`
- 오류: `코드 또는 비밀번호가 올바르지 않습니다.`

## 1-2. 대시보드

- 상단 카드: **사업체 수 / 사용자 수 / 요청 트래픽(RPM) / AI 토큰 비용(이번달) / 운영 비용(이번달)**
    - 각 카드 우측 상단 `…` → 기간(오늘/7일/30일/사용자 지정) 선택
- 차트:
    - 트래픽 추이(선형), 비용 추이(막대), 상위 사용 업체 Top 10(표)
- 빠른 액션: `공지 작성` `CS 인박스 열기`

## 1-3. 공지사항

- 리스트 테이블: `제목` `게시상태(예약/게시/종료)` `게시시작` `게시종료` `작성자` `수정일`
    - 행 액션: `수정` `삭제(확인 모달: 사유 선택/기타 입력)`
    - 상단: `검색(제목)` `상태 필터` `새로 작성`
- 새로 작성(에디터 화면)
    - 필드: `제목*` `본문(Rich Text)*` `첨부(업로드)` `게시시간(즉시/예약)` `만료시간(선택)`
    - 버튼: `미리보기` `임시저장` `게시`
    - 검증: 제목/본문 필수, 예약 시간 과거 금지

## 1-4. CS 관리(메일 연동)

- 좌측 폴더: `미응답` `처리중` `완료` `모든 메일`
- 상단 우측: 미응답 **N**개 배지
- 리스트: `보낸사람` `제목` `수신시각` `상태` `연결된 업체/사용자`
- 상세: 스레드 보기 + **답장/전달/첨부** / **템플릿 삽입** / **담당자 배정** / `완료처리`
- 검색: 보낸사람/제목/업체/상태

---

# 2) MASTER ADMIN (업체 관리자) — “사용자”

## 2-1. 로그인 / 회원가입

### 로그인 페이지

- 입력: **ID** **PW** **업체코드**
- 옵션:
    - `자동 저장` 체크(세 기입값 저장)
    - **다중 업체**: “저장된 업체 계정” 목록 카드(상호/업체코드/최근 로그인). 카드 탭 → 값 자동 채움 → `로그인`.
- 하단 링크:
    - `회원가입`(작게 노출)
    - `소셜 로그인` 아이콘: 네이버 / 구글 / 카카오 / 토스
    - `ID/PW 찾기 안내` : “**메일로 문의** 버튼” → `문의 메일 열기`(기본 템플릿)
- 오류:
    - `입력하신 ID/PW/업체코드 조합을 확인해주세요.`

### 회원가입(멀티 스텝)

1. **대표자 정보**: 대표자성함*, 연락처*, 이메일
2. **업체 정보**: 상호명*, 사업자번호*(10자리), 업종, 주소
3. **계정 설정**: ID*, PW*(영문+숫자 8~20), PW 확인
4. **증빙 업로드**: 사업자등록증(PDF/JPG/PNG)
5. **본인인증**: 휴대폰 본인인증(동의 체크 후 진행)
    - 완료 화면: `업체 코드 자동 발급` + `복사하기` 버튼 / `로그인으로 이동`
    - 검증: 중복 ID/사업자번호 체크, 파일 용량/확장자

## 2-2. 대시보드

- 상단 “실시간 근무 현황” 카드:
    - `출근 N` `휴게 N` `퇴근 N` (숫자 클릭 → **현황 상세 모달**: 이름/직급/근무지/경과시간/지각여부/외근여부)
- **신규 근로자 승인** 버튼(빨간 배지 수 표시)
    - 클릭 → 승인 대기 리스트 페이지로 이동
- **오늘의 근태 특이사항** 카드:
    - 섹션별 탭: `지각` `결근` `초과근무`
    - 각 섹션: `이름` `예정(시작~끝)` `실제(시작~끝)` `차이` `사유`
    - 우측 상단 `자세히 보기` → 근태 관리로 이동(해당 필터 유지)
- **예상 인건비(오늘)**:
    - 계산 기준: 스케줄 기반 + 현재 실근로 추정(퇴근 전은 시각∼현재)
    - 툴팁: “스케줄/계약 단가 기준 추정치이며 확정은 근태 마감 후 산출됩니다.”
- 단축 타일: `근로자 관리` `근태 관리` `스케줄 관리` `QR 관리` `설정`

## 2-3. 근로자 관리

### (A) 신규 근로자 승인

- 리스트: `이름` `전화번호` `생년월일` `신청일시` `메모`
    - 검색: 이름/전화번호
    - 행 클릭 → **승인/반려 모달**
        - 내용 요약(신청 정보)
        - `승인 후 추가정보 입력` / `나중에 입력` 선택
        - 버튼: `승인` `반려(사유필수)`
- 승인 시 추가정보(즉시 또는 나중에):
    - 탭: **기본/고용/급여/서류/권한**
    - 기본: 이름, 연락처, 이메일(선택), 주소(선택)
    - 고용: 고용형태(정규/아르바이트), 직책(선택리스트), 근무지(여러 매장일 경우), 입사일, 연차 정보
    - 급여: 급여형태(시급/월급), 금액, 야간/연장수당 정책, 지급일
    - 서류: **계약서 업로드**, **통장사본 업로드**
    - 권한: **매니저(ADMIN) 지정 스위치** → 켜면 **세부 권한 체크박스** 노출
        - `근로자 승인` `스케줄 승인` `근태 수정` `엑셀 다운로드` `공지 열람` 등

### (B) 근로자 리스트

- 테이블: `이름` `직급` `상태(재직/퇴사)` `추가정보상태(정상/미흡)` `입사일` `최근근무`
- 빨간 글씨: **추가 정보 미흡**
- 행 클릭 → **프로필 편집**(바로 위 “추가정보” 탭 구조 동일)
- 상단 액션: `신규 초대(링크 복사)` `퇴사자 보기` `엑셀 다운로드`

### (C) 근태 관리

- 상단 탭: `직원별` | `날짜별`
- 공통 필터: `기간(일/주/월 커스텀)` `직원` `근태상태(정상/지각/조퇴/결근/외근)` `수정여부`
- **직원별 보기**
    - 좌: 직원 선택(검색/스크롤) / 우: 달력(월/주/일) + 기록 테이블
    - 기록 테이블: `날짜` `출근` `휴게시작` `휴게종료` `퇴근` `실근로(h)` `지각/결근` `수정여부`
    - 행 액션: `수정` `삭제(사유필수)` `감사로그`
    - 수정 모달: 시간 피커 + 사유(필수) → 저장 시 스냅샷/감사로그 기록
- **날짜별 보기**
    - 달력에 일자 클릭 → 해당 일의 모든 직원 **타임라인**
    - 리스트: `이름` `근무(시~시)` `휴게(분)` `특이` `메모`
- 하단: `엑셀 내보내기(XLSX/CSV)`

## 2-4. 스케줄 관리

- 상단 탭: `월` `주` `일` (단위 전환)
- 좌측: 직원 목록(색상 배정/검색), 필터(부서/직급)
- 메인 캘린더:
    - 드래그로 시간 선택 → **스케줄 추가 모달**
        - 필드: 직원*, 날짜/시간*, 반복(없음/매주/격주/매월), 기본 휴게(분), 메모
    - 충돌 감지: 같은 직원 중복 → 경고 토스트/저장 불가 옵션
    - 블록 클릭: `편집` `삭제(사유)` `복제`
    - 휴무 지정: 날짜 클릭 → `휴무` 토글
- 상단 액션: `현재 보기 엑셀 다운로드` `색상 랜덤 재배정`

## 2-5. QR 관리

- QR 패널: **매장명 / 업체코드 / 마지막 재발급일**
- 미리보기(정사각)
- 버튼: `PNG 다운로드` `PDF 다운로드(A4 포스터)` `재발급`
    - 재발급 확인 모달: “기존 QR을 사용 중인 곳이 있다면 즉시 무효화됩니다.”
- 발급 이력: `일시` `담당자` `비고`

## 2-6. 설정

- **세션 만료시간(분)**: 슬라이더 1~30(기본 5) + 경고문(10분 초과시 경고)
- **지오펜스 반경(m)**: 슬라이더 20~200(기본 50)
- **근태상황 추가**: 커스텀 상태(예: 교육/출장) 등록(색상/라벨)
- **야간 알림 묵음**: 시간대(예: 22:00~07:00)
- **푸시 설정**: 신규요청/승인/반려/마감 알림 ON/OFF
- **주 시작 요일**: 월/일 선택
- 저장 시 토스트: `저장되었습니다.` / 잘못된 범위 입력 시 400 에러 처리

---

# 3) ADMIN (권한 부여자, 매니저) — “사용자”

> USER 화면과 동일한 레이아웃 + 권한 배지 + 추가 메뉴/버튼 활성화
> 
- 상단 배지: `부여 권한: 근로자 승인 · 스케줄 승인 · 근태 수정 · 엑셀 다운로드` (실제 부여된 항목만)
- 사용 가능 페이지/기능:
    - **신규 근로자 승인**(있는 경우만)
    - **스케줄 승인/반려**
    - **근태 수정/삭제(사유 필수)**
    - **엑셀 다운로드**
- 접근 불가 항목 클릭 시: `권한이 필요합니다(관리자에게 요청).`

---

# 4) USER (근로자) — “사용자”

## 4-1. 신규 근로자 신청 (QR 최초 스캔)

- 폼: `이름*` `전화번호*` `생년월일*`
- 체크: 개인정보 동의(필수)
- 버튼: `신청하기`
- 성공 화면: `신청이 완료되었습니다. 승인 후 안내됩니다.`
- 승인 대기 중 다시 QR 스캔 시: `승인 대기중` 배지 + 안내

## 4-2. 대시보드(승인 이후)

- 상단: **오늘 날짜/시간** + **본인 이름**
- 현재 상태 배지: `출근완료 / 휴게중 / 휴게종료 / 퇴근완료 / 외근중`
- **상태 버튼 영역**
    - 기본 버튼: `출근` `휴게시작` `휴게종료` `퇴근` `외근`
    - **활성 규칙(상태머신)**
        - NONE → `출근`만 활성
        - WORKING(출근완료) → `휴게시작`/`퇴근` 활성
        - BREAK(휴게중) → `휴게종료`만 활성
        - DONE(퇴근완료) → `출근`만 활성
        - 외근은 별도 토글형: `외근 시작` ↔ `외근 종료` (외근 중에는 출근/휴게/퇴근 버튼 비활성)
    - 누를 때 확인 토스트: `출근이 기록되었습니다(09:01).`
    - 실패(지오펜스 이탈/세션만료):
        - `매장 반경 밖에서는 기록할 수 없습니다.`
        - `세션이 만료되었습니다. QR을 다시 스캔해주세요.`
- **오늘 스케줄 요약**
    - `예정 출근 10:00 / 퇴근 19:00 / 휴게 60분`
    - `모든 근로자 스케줄 보기` 링크
- **신청 영역**
    - `스케줄 변경 신청` (날짜/시간 변경, 사유 필수)
    - `휴무 신청` (기간/종류: 연차/반차/병가 등, 사유 필수)
- **신청 내역**
    - 테이블: `종류` `신청일` `기간/시간` `상태(대기/승인/반려)` `반려사유`
- **근무 내역 열람 신청**
    - 설명: “개인정보 보호를 위해 관리자 승인 후 열람 가능”
    - 버튼: `열람 신청` → 상태 `대기` → 승인되면 `내 근무 내역 보기` 버튼 활성

---

# 권한 매트릭스 (요약)

| 기능 | SUPER ADMIN | MASTER ADMIN | ADMIN(매니저) | USER |
| --- | --- | --- | --- | --- |
| 시스템 공지/CS | ✅ | ❌ | ❌ | ❌ |
| 업체 가입/로그인 | ❌ | ✅ | ❌ | ❌ |
| 신규 근로자 승인 | ❌ | ✅ | ⭕(부여 시) | ❌ |
| 근로자 정보 수정/퇴사 | ❌ | ✅ | ⭕(부여 시) | ❌ |
| 근태 조회/수정/삭제 | ❌ | ✅ | ⭕(부여 시) | 자기만 조회(수정❌) |
| 스케줄 등록/승인/휴무 | ❌ | ✅ | ⭕(부여 시) | 신청만 |
| 엑셀 다운로드 | ❌ | ✅ | ⭕(부여 시) | ❌ |
| QR 발급/재발급 | ❌ | ✅ | ❌ | ❌ |
| 설정(세션/지오펜스 등) | ❌ | ✅ | ❌ | ❌ |

---

# 테이블/모달 상세 스펙 (주요 페이지)

## 근로자 승인 모달

- 본문: 이름/연락처/생년월일/신청시각
- 라디오: `승인 후 추가정보 입력` | `나중에 입력`
- 버튼: `승인` `반려`
- 반려 선택 시: **반려사유 필수 텍스트**(최소 5자)

## 근태 수정 모달

- 필드: 출근/휴게시작/휴게종료/퇴근(시간 피커), 메모
- **수정 사유(필수)** 텍스트
- 하단: 변경 전/후 비교 미리보기

## 스케줄 추가/편집 모달

- 필드: 직원*, 날짜/시작~종료*, 반복, 휴게(분), 메모
- 충돌 시: `동일 직원의 겹치는 스케줄이 있습니다.`

## 엑셀 내보내기 모달

- 포함 범위: 현재 필터, 기간 확인
- 포맷: XLSX / CSV
- 버튼: `내보내기` → 작업 큐 투입 → 완료 알림/링크

---

# 빈 상태/오류 메시지(UX)

- “표시할 데이터가 없습니다.” → `필터 초기화` 버튼 제공
- “권한이 없습니다.” → `관리자에게 권한 요청`
- “네트워크 오류” → `다시 시도` / 오프라인 배너
- QR 세션 만료 → 카운트다운 종료 시 `QR 재스캔` CTA

---

# 지오펜스/세션 UX(사용자)

- 상단 배너: `세션 남은 시간 02:14`(카운트다운)
- **반경 이탈 시 버튼 비활성** + 배너: `매장 반경 내에서만 기록 가능`
- 외근: `외근 시작`(위치 기록) ↔ `외근 종료`(위치 기록) / 외근 중 근태버튼 잠금

---

# 네비게이션 구조(간단)

- **SUPER ADMIN**: 대시보드 / 공지사항 / CS
- **MASTER ADMIN**: 대시보드 / 근로자관리 / 근태관리 / 스케줄 / QR관리 / 설정
- **ADMIN**: (USER 메뉴) + 권한별 추가 메뉴만 표시
- **USER**: 대시보드(출퇴근/스케줄/신청/내역)

---

# 필드/컬럼 샘플(복사해서 쓰기)

**근태 기록 컬럼**

- 날짜, 이름, 직급, 출근, 휴게시작, 휴게종료, 퇴근, 실근로(분/시간), 지각/결근, 외근, 수정여부, 메모

**근로자 추가정보 필드**

- 고용형태, 직책, 근무지, 입사일, 연차, 급여형태, 급여금액, 야간/연장 수당정책, 지급일, 계약기간, 4대보험, 계좌(은행/번호), 계약서/통장사본 업로드

---

# 누락 가능 포인트 보강(이번에 반영한 것)

- **다중 업체 로그인 선택 UI**(저장된 계정 카드)
- **승인 후 ‘나중에 입력’ 플로우**와 추후 보완 표시(빨간 “추가정보 미흡”)
- **외근 토글 흐름**(외근 시작/종료, 외근 중 다른 버튼 잠금)
- **예상 인건비 계산 기준/툴팁**
- **근태/스케줄 수정·삭제 ‘사유 필수’ 모달** 통일
- **근무 내역 ‘열람 신청→승인 후 보기’ 절차**
- **엑셀 내보내기**: 필터 반영/큐 처리/완료 알림
- **설정**: 세션 만료/지오펜스/야간 묵음/주 시작 요일/커스텀 근태상황

나중에 개발해도 되는것을 노란 색상으로 블록처리했습니다!!